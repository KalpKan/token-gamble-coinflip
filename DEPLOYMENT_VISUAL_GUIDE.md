# ğŸ¨ Visual Deployment Guide

## ğŸ“Š Deployment Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 1: LOCAL SETUP                          â”‚
â”‚                                                                  â”‚
â”‚  Your Computer                                                   â”‚
â”‚  â”œâ”€â”€ token-gamble-coinflip/                                     â”‚
â”‚  â”‚   â”œâ”€â”€ app/                                                   â”‚
â”‚  â”‚   â”œâ”€â”€ components/                                            â”‚
â”‚  â”‚   â”œâ”€â”€ lib/                                                   â”‚
â”‚  â”‚   â”œâ”€â”€ package.json                                           â”‚
â”‚  â”‚   â”œâ”€â”€ vercel.json âœ¨ NEW                                     â”‚
â”‚  â”‚   â””â”€â”€ .env.local (NOT committed)                            â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€â”€ git init â†’ git add . â†’ git commit                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 2: GITHUB                                â”‚
â”‚                                                                  â”‚
â”‚  GitHub.com                                                      â”‚
â”‚  â””â”€â”€ Create Repository                                          â”‚
â”‚      â””â”€â”€ token-gamble-coinflip                                  â”‚
â”‚          â””â”€â”€ git push origin main                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 3: SUPABASE                              â”‚
â”‚                                                                  â”‚
â”‚  Supabase Dashboard                                              â”‚
â”‚  â”œâ”€â”€ Get Project URL: https://xxxxx.supabase.co                â”‚
â”‚  â”œâ”€â”€ Get Anon Key: eyJ...                                       â”‚
â”‚  â””â”€â”€ Run SQL Setup (supabase-setup.sql)                        â”‚
â”‚      â”œâ”€â”€ users table âœ…                                          â”‚
â”‚      â”œâ”€â”€ prompts table âœ…                                        â”‚
â”‚      â”œâ”€â”€ coinflips table âœ…                                      â”‚
â”‚      â””â”€â”€ RLS policies âœ…                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 4: VERCEL                                â”‚
â”‚                                                                  â”‚
â”‚  Vercel.com                                                      â”‚
â”‚  â”œâ”€â”€ Import GitHub Repo                                         â”‚
â”‚  â”œâ”€â”€ Add Environment Variables:                                 â”‚
â”‚  â”‚   â”œâ”€â”€ NEXT_PUBLIC_SUPABASE_URL                              â”‚
â”‚  â”‚   â””â”€â”€ NEXT_PUBLIC_SUPABASE_ANON_KEY                         â”‚
â”‚  â”œâ”€â”€ Click "Deploy"                                             â”‚
â”‚  â””â”€â”€ Wait 2-3 minutes...                                        â”‚
â”‚      â””â”€â”€ âœ… Deployed!                                            â”‚
â”‚          â””â”€â”€ https://your-project.vercel.app                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 5: CONFIGURE                             â”‚
â”‚                                                                  â”‚
â”‚  Back to Supabase                                                â”‚
â”‚  â””â”€â”€ Authentication â†’ URL Configuration                         â”‚
â”‚      â””â”€â”€ Add Redirect URLs:                                     â”‚
â”‚          â”œâ”€â”€ https://your-project.vercel.app/auth/callback     â”‚
â”‚          â””â”€â”€ https://*.vercel.app/auth/callback                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    âœ… LIVE!                                      â”‚
â”‚                                                                  â”‚
â”‚  Your App is Now Running at:                                    â”‚
â”‚  https://your-project.vercel.app                                â”‚
â”‚                                                                  â”‚
â”‚  Test:                                                           â”‚
â”‚  â”œâ”€â”€ Sign up âœ…                                                  â”‚
â”‚  â”œâ”€â”€ Add API key âœ…                                              â”‚
â”‚  â”œâ”€â”€ Create prompt âœ…                                            â”‚
â”‚  â”œâ”€â”€ Create coinflip âœ…                                          â”‚
â”‚  â””â”€â”€ Join coinflip âœ…                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Continuous Deployment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Make Code   â”‚
â”‚   Changes    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  git commit  â”‚
â”‚  git push    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub     â”‚â”€â”€â”€â”€â”€â–¶â”‚  Vercel Detects â”‚
â”‚  (main)      â”‚      â”‚  New Commit     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Vercel Builds  â”‚
                      â”‚  Your App       â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Vercel Deploys â”‚
                      â”‚  Automatically  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  âœ… Live in     â”‚
                      â”‚  2-3 minutes!   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER'S BROWSER                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   Lobby    â”‚  â”‚  Prompts   â”‚  â”‚  Profile   â”‚               â”‚
â”‚  â”‚   Page     â”‚  â”‚   Page     â”‚  â”‚   Page     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                  â”‚
â”‚  Next.js App (React + TypeScript + Tailwind)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTPS
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VERCEL EDGE NETWORK                         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Static Pages (Pre-rendered)                  â”‚  â”‚
â”‚  â”‚  - Fast loading                                           â”‚  â”‚
â”‚  â”‚  - Cached globally                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         API Routes (Serverless Functions)                 â”‚  â”‚
â”‚  â”‚  - /api/coinflip/create                                   â”‚  â”‚
â”‚  â”‚  - /api/coinflip/join                                     â”‚  â”‚
â”‚  â”‚  - /api/coinflip/cancel                                   â”‚  â”‚
â”‚  â”‚  - /api/openai/answer âš¡ GPT-4o-mini                      â”‚  â”‚
â”‚  â”‚  - /api/random/coinflip                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚
                â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     SUPABASE         â”‚    â”‚    OPENAI API        â”‚
â”‚                      â”‚    â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Authentication â”‚ â”‚    â”‚  â”‚  GPT-4o-mini   â”‚ â”‚
â”‚  â”‚ - Email/Pass   â”‚ â”‚    â”‚  â”‚                â”‚ â”‚
â”‚  â”‚ - Google OAuth â”‚ â”‚    â”‚  â”‚  Pricing:      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚  â”‚  $0.150/1M in  â”‚ â”‚
â”‚                      â”‚    â”‚  â”‚  $0.600/1M out â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚   Database     â”‚ â”‚    â”‚                      â”‚
â”‚  â”‚ - users        â”‚ â”‚    â”‚  Cost per request:   â”‚
â”‚  â”‚ - prompts      â”‚ â”‚    â”‚  ~$0.0001-$0.0006   â”‚
â”‚  â”‚ - coinflips    â”‚ â”‚    â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Real-time    â”‚ â”‚
â”‚  â”‚ - Lobby updatesâ”‚ â”‚
â”‚  â”‚ - WebSockets   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Security     â”‚ â”‚
â”‚  â”‚ - RLS Policies â”‚ â”‚
â”‚  â”‚ - API Keys     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° Cost Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         YOU (Developer)                          â”‚
â”‚                                                                  â”‚
â”‚  Costs:                                                          â”‚
â”‚  â”œâ”€â”€ Vercel Hosting: $0/month (Free tier)                      â”‚
â”‚  â”œâ”€â”€ Supabase: $0/month (Free tier)                            â”‚
â”‚  â””â”€â”€ OpenAI: $0/month (users provide keys)                     â”‚
â”‚                                                                  â”‚
â”‚  Total: $0/month ğŸ‰                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USERS (Players)                             â”‚
â”‚                                                                  â”‚
â”‚  Each user provides their own OpenAI API key                    â”‚
â”‚                                                                  â”‚
â”‚  Cost per coinflip loss:                                        â”‚
â”‚  â”œâ”€â”€ Short (150 tokens): ~$0.0001 (1/100th penny)             â”‚
â”‚  â”œâ”€â”€ Medium (400 tokens): ~$0.0003 (3/100th penny)            â”‚
â”‚  â””â”€â”€ Long (800 tokens): ~$0.0006 (6/100th penny)              â”‚
â”‚                                                                  â”‚
â”‚  Example: Lose 100 coinflips = $0.06 (6 cents!)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER AUTHENTICATION                           â”‚
â”‚                                                                  â”‚
â”‚  User enters email/password                                      â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Supabase Auth validates                                        â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Session token created                                          â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Token stored in cookie (httpOnly, secure)                      â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  User can access protected routes âœ…                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API KEY SECURITY                              â”‚
â”‚                                                                  â”‚
â”‚  User enters OpenAI API key in Profile                          â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Key stored in Supabase (encrypted at rest)                     â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  RLS Policy: User can only access their own key                 â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  When coinflip lost:                                            â”‚
â”‚    â”œâ”€â”€ Server fetches loser's key                              â”‚
â”‚    â”œâ”€â”€ Server makes OpenAI call                                â”‚
â”‚    â””â”€â”€ Key NEVER exposed to client âœ…                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow: Coinflip Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: User A Creates Coinflip                                â”‚
â”‚                                                                  â”‚
â”‚  User A:                                                         â”‚
â”‚  â”œâ”€â”€ Selects prompt: "What is quantum computing?"              â”‚
â”‚  â”œâ”€â”€ Chooses depth: Medium (400 tokens)                        â”‚
â”‚  â”œâ”€â”€ Picks side: Heads                                         â”‚
â”‚  â””â”€â”€ Clicks "Create"                                            â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  API: /api/coinflip/create                                      â”‚
â”‚  â”œâ”€â”€ Validates prompt ownership                                â”‚
â”‚  â”œâ”€â”€ Marks prompt as "locked"                                  â”‚
â”‚  â””â”€â”€ Creates coinflip record                                   â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Supabase Real-time broadcasts to all users                    â”‚
â”‚  â””â”€â”€ Coinflip appears in lobby for everyone âœ…                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: User B Joins Coinflip                                  â”‚
â”‚                                                                  â”‚
â”‚  User B:                                                         â”‚
â”‚  â”œâ”€â”€ Sees coinflip in lobby                                    â”‚
â”‚  â”œâ”€â”€ Clicks "Join"                                              â”‚
â”‚  â”œâ”€â”€ Selects their prompt: "Explain blockchain"                â”‚
â”‚  â””â”€â”€ Auto-assigned: Tails (opposite of User A)                 â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  API: /api/coinflip/join                                        â”‚
â”‚  â”œâ”€â”€ Validates prompt ownership                                â”‚
â”‚  â”œâ”€â”€ Marks User B's prompt as "locked"                         â”‚
â”‚  â”œâ”€â”€ Updates coinflip with User B's info                       â”‚
â”‚  â””â”€â”€ Triggers coin flip!                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Coin Flip Animation                                    â”‚
â”‚                                                                  â”‚
â”‚  API: /api/random/coinflip                                      â”‚
â”‚  â””â”€â”€ Generates random result: "Heads" or "Tails"               â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Both users see:                                                â”‚
â”‚  â”œâ”€â”€ Animated coin spinning (3 seconds)                        â”‚
â”‚  â”œâ”€â”€ Coin lands on result                                      â”‚
â”‚  â””â”€â”€ Result displayed: "HEADS!"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Winner Determined                                       â”‚
â”‚                                                                  â”‚
â”‚  Result: Heads â†’ User A wins! ğŸ‰                                â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  API: /api/openai/answer                                        â”‚
â”‚  â”œâ”€â”€ Fetches User B's API key (loser)                          â”‚
â”‚  â”œâ”€â”€ Calls OpenAI with User A's prompt (winner)                â”‚
â”‚  â”‚   â”œâ”€â”€ Model: gpt-4o-mini                                    â”‚
â”‚  â”‚   â”œâ”€â”€ Max tokens: 400 (medium)                              â”‚
â”‚  â”‚   â””â”€â”€ Cost: ~$0.0003 (User B pays)                          â”‚
â”‚  â””â”€â”€ Returns answer                                             â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  User A sees:                                                    â”‚
â”‚  â”œâ”€â”€ ğŸ‰ Confetti animation                                      â”‚
â”‚  â”œâ”€â”€ "YOU WIN!" message                                         â”‚
â”‚  â”œâ”€â”€ Answer to their prompt                                    â”‚
â”‚  â””â”€â”€ Prompt moved to "Settled" tab                             â”‚
â”‚                                                                  â”‚
â”‚  User B sees:                                                    â”‚
â”‚  â”œâ”€â”€ "YOU LOSE" message                                         â”‚
â”‚  â””â”€â”€ Prompt unlocked (can use again)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Quick Reference: File Locations

```
token-gamble-coinflip/
â”‚
â”œâ”€â”€ ğŸ“„ DEPLOYMENT_GUIDE.md â­ START HERE
â”œâ”€â”€ ğŸ“„ QUICK_DEPLOYMENT_CHECKLIST.md âš¡ 10-min guide
â”œâ”€â”€ ğŸ“„ OPENAI_COST_PROTECTION.md ğŸ’° Cost info
â”œâ”€â”€ ğŸ“„ DEPLOYMENT_SUMMARY.md ğŸ“Š Overview
â”œâ”€â”€ ğŸ“„ DEPLOYMENT_VISUAL_GUIDE.md ğŸ¨ This file
â”‚
â”œâ”€â”€ vercel.json âœ¨ Vercel config
â”œâ”€â”€ .vercelignore âœ¨ Deployment exclusions
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ openai/answer/route.ts âš¡ GPT-4o-mini
â”‚   â”‚   â””â”€â”€ coinflip/
â”‚   â”œâ”€â”€ (protected)/
â”‚   â”‚   â”œâ”€â”€ lobby/page.tsx
â”‚   â”‚   â”œâ”€â”€ prompts/page.tsx
â”‚   â”‚   â””â”€â”€ profile/page.tsx
â”‚   â””â”€â”€ login/page.tsx
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navigation.tsx ğŸ“± Mobile menu
â”‚   â”œâ”€â”€ CoinflipCard.tsx
â”‚   â”œâ”€â”€ CoinAnimation.tsx
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ supabase/
    â””â”€â”€ coinflips/
```

---

## âœ… Deployment Checklist (Visual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPLOYMENT CHECKLIST                          â”‚
â”‚                                                                  â”‚
â”‚  Pre-Deployment:                                                 â”‚
â”‚  â˜ Code complete                                                â”‚
â”‚  â˜ Environment variables ready                                  â”‚
â”‚  â˜ Supabase project set up                                     â”‚
â”‚  â˜ Database tables created                                      â”‚
â”‚                                                                  â”‚
â”‚  Deployment:                                                     â”‚
â”‚  â˜ Push to GitHub                                               â”‚
â”‚  â˜ Import to Vercel                                             â”‚
â”‚  â˜ Add environment variables                                    â”‚
â”‚  â˜ Deploy                                                        â”‚
â”‚                                                                  â”‚
â”‚  Post-Deployment:                                                â”‚
â”‚  â˜ Update Supabase redirect URLs                               â”‚
â”‚  â˜ Test sign up/login                                          â”‚
â”‚  â˜ Test coinflip flow                                          â”‚
â”‚  â˜ Verify real-time updates                                    â”‚
â”‚  â˜ Check OpenAI integration                                    â”‚
â”‚                                                                  â”‚
â”‚  Optional:                                                       â”‚
â”‚  â˜ Add custom domain                                            â”‚
â”‚  â˜ Set up monitoring                                            â”‚
â”‚  â˜ Implement rate limiting                                      â”‚
â”‚  â˜ Add analytics                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Ready to deploy?** Follow **QUICK_DEPLOYMENT_CHECKLIST.md** for step-by-step instructions!

**Questions?** Check **DEPLOYMENT_GUIDE.md** for detailed explanations!

**Worried about costs?** Read **OPENAI_COST_PROTECTION.md** for peace of mind!

---

ğŸš€ **Happy Deploying!**
